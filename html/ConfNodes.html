
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Configuring the simulated network &#8212; SimulaQron 3.0.15 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The CQC interface" href="CQC.html" />
    <link rel="prev" title="Getting started" href="GettingStarted.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CQC.html" title="The CQC interface"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="GettingStarted.html" title="Getting started"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SimulaQron 3.0.15 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuring the simulated network</a><ul>
<li><a class="reference internal" href="#starting-the-simulaqron-backend">Starting the SimulaQron backend</a></li>
<li><a class="reference internal" href="#using-the-keep-flag">Using the –keep flag</a></li>
<li><a class="reference internal" href="#multiple-networks">Multiple networks</a></li>
<li><a class="reference internal" href="#configuring-the-network">Configuring the network</a></li>
<li><a class="reference internal" href="#starting-a-network-from-python">Starting a network from Python</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="GettingStarted.html"
                        title="previous chapter">Getting started</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="CQC.html"
                        title="next chapter">The CQC interface</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ConfNodes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuring-the-simulated-network">
<h1>Configuring the simulated network<a class="headerlink" href="#configuring-the-simulated-network" title="Permalink to this headline">¶</a></h1>
<div class="section" id="starting-the-simulaqron-backend">
<h2>Starting the SimulaQron backend<a class="headerlink" href="#starting-the-simulaqron-backend" title="Permalink to this headline">¶</a></h2>
<p>The backend of a SimulaQron network is a set of running virtual nodes and their corresponding CQC servers. To start the backend of a SimulaQron network run the command <code class="docutils literal notranslate"><span class="pre">simulaqron</span> <span class="pre">start</span></code>.</p>
<p>With no arguments, a network is by default started with the five nodes Alice, Bob, Charlie, David and Eve. How to adjust the nodes and the topology of the network is described below.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">simulaqron</span> <span class="pre">start</span></code> can fail if any of the ports specified in the config files are already in use by a running SimulaQron network or another program.</p>
</div>
<p>To configure networks see section <a class="reference internal" href="#networkconfig"><span class="std std-ref">Configuring the network</span></a>.
Finally for instructions on how to connect to an already runnning simulated network using CQC, see section <a class="reference internal" href="CQC.html#remotenetwork"><span class="std std-ref">Connecting to a remote simulated network</span></a>.</p>
<p>If you want to start a network with for example the three nodes Alex, Bart, Curt, simply type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">nodes</span> <span class="n">Alex</span><span class="p">,</span><span class="n">Bart</span><span class="p">,</span><span class="n">Curt</span>
</pre></div>
</div>
<p>If you simply want a network with 10 nodes, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">nrnodes</span> <span class="mi">10</span>
</pre></div>
</div>
<p>This will start up a network where the nodes are called Node0, Node1, …, Node9.</p>
<p>The –nodes and –nrnodes can be combined. Let’s say you want a network with 10 nodes and that three of the nodes are called Alice, Bob and Charlie, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">nodes</span> <span class="n">Alice</span><span class="p">,</span><span class="n">Bob</span><span class="p">,</span><span class="n">Charlie</span> <span class="o">--</span><span class="n">nrnodes</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Which will start up a network with the nodes Alice, Bob, Charlie, Node0, Node1, …, Node6. If –nrnodes is less than the entries in –nodes, then –nrnodes is ignored. The two keywords can also be specified shorter as -nd and -nn respectively. So the above can also be done as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">-</span><span class="n">n</span> <span class="n">Alice</span><span class="p">,</span><span class="n">Bob</span><span class="p">,</span><span class="n">Charlie</span> <span class="o">-</span><span class="n">N</span> <span class="mi">10</span>
</pre></div>
</div>
<p>You can also specify a topology of the network. For example if you want 10 nodes in a ring topology, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">nrnodes</span> <span class="mi">10</span> <span class="o">--</span><span class="n">topology</span> <span class="n">ring</span>
</pre></div>
</div>
<p>In this network Node <span class="math notranslate nohighlight">\(i\)</span> can create EPR pairs and send qubits to Node <span class="math notranslate nohighlight">\(i-1 \pmod{10}\)</span> and Node <span class="math notranslate nohighlight">\(i+1 \pmod{10}\)</span>. However, if a CQC message is sent to for example Node2 to produce entanglement with Node5, a error message (CQC_ERR_UNSUPP) will be returned. The options for the automatically generated topologies are currently:</p>
<ul class="simple">
<li><p><cite>complete</cite>: A fully connected. This is also used if the argument –topology is not used.</p></li>
<li><p><cite>ring</cite>: A ring network, i.e. a connected topology where every node has exactly two neighbors.</p></li>
<li><p><cite>path</cite>: A path network, i.e. a connected topology where every node has exactly two neighbors but there are no cycles.</p></li>
<li><p><cite>random_tree</cite>: Generates a random tree, i.e. a topology without cycles.</p></li>
<li><p><cite>random_connected_{int}</cite>: Generates a random connected graph with a specified number of edges. For example a random connected network on 10 nodes, can be specified as <cite>random_connected_20</cite>. Note that the number of edges for a network with <span class="math notranslate nohighlight">\(n\)</span> nodes must be greater or equal to <span class="math notranslate nohighlight">\(n-1\)</span> and less or equal to <span class="math notranslate nohighlight">\(n(n-1)/1\)</span>.</p></li>
</ul>
<p>Along with setting up the network with the specified topology a .png figure is also generated and stored as config/topology.png. This is useful if a random network is used, to easily visualize the network used.</p>
<p>As a final example let’s combine all the arguments specified above and create a network using 15 nodes, where two of then are called Alice and Bob and the topology of the network is randomly generated as a connected graph with 20 edges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">-</span><span class="n">n</span> <span class="n">Alice</span><span class="p">,</span><span class="n">Bob</span> <span class="o">-</span><span class="n">N</span> <span class="mi">15</span> <span class="o">-</span><span class="n">t</span> <span class="n">random_connected_20</span>
</pre></div>
</div>
<p>The network that is then started might look like this:</p>
<a class="reference internal image-reference" href="_images/topology.png"><img alt="Programming SimulaQrons Interfaces" class="align-center" src="_images/topology.png" style="width: 400px;" /></a>
<p>To create a custom topology, see below.</p>
</div>
<div class="section" id="using-the-keep-flag">
<h2>Using the –keep flag<a class="headerlink" href="#using-the-keep-flag" title="Permalink to this headline">¶</a></h2>
<p>By default simulaqron will try to overwrite the current network config of a network your trying to start.
For example if you have a network called “my_network” with the nodes Alice, Bob and Charlie and you type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">my_network</span> <span class="o">--</span><span class="n">nodes</span><span class="o">=</span><span class="n">Alice</span><span class="p">,</span><span class="n">Bob</span>
</pre></div>
</div>
<p>simulaqron will ask you if you want to edit the config file to make “my_network” be a network with the nodes Alice and Bob.
However if you add the flag <code class="docutils literal notranslate"><span class="pre">--keep</span></code>, simulaqron will simply start up Alice and Bob in the network “my_network” without editing the config file.
This is useful if your planning to simulated a network between multiple physical computers.
Since in this case, the node Charlie might be simulated at a differnent computer so you still want the addresses of Charlie in your config file but you don’t want to start that node on your computer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to suppress the check from simulaqron whether you want to edit the network config file you can always add the flag <code class="docutils literal notranslate"><span class="pre">--force</span></code> (<code class="docutils literal notranslate"><span class="pre">-f</span></code>).</p>
</div>
</div>
<div class="section" id="multiple-networks">
<h2>Multiple networks<a class="headerlink" href="#multiple-networks" title="Permalink to this headline">¶</a></h2>
<p>To run multiple networks at the same time you need to given them different names by using the –name flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">start</span> <span class="o">--</span><span class="n">name</span> <span class="n">NETWORK</span>
</pre></div>
</div>
<p>To stop a network with a specific name type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">stop</span> <span class="o">--</span><span class="n">name</span> <span class="n">NETWORK</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default the network name is “default”. To have multiple networks running at the same time the nodes cannot use the same port numbers.</p>
</div>
<p>How multiple networks can be setup is described below.</p>
</div>
<div class="section" id="configuring-the-network">
<span id="networkconfig"></span><h2>Configuring the network<a class="headerlink" href="#configuring-the-network" title="Permalink to this headline">¶</a></h2>
<p>Using the CLI you can add nodes to a network using for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">nodes</span> <span class="n">add</span> <span class="n">Maria</span>
</pre></div>
</div>
<p>which adds the node Maria to the default network “default”. If you want add a node to another network you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulaqron</span> <span class="n">nodes</span> <span class="n">add</span> <span class="n">Maria</span> <span class="o">--</span><span class="n">network</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;OtherNetwork&quot;</span>
</pre></div>
</div>
<p>which adds Maria to the network “OtherNetwork”.
You can also specify hostname and port numbers to be used for this node including what it’s neighbors are using the arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--hostname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--app_port</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cqc_port</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--vnode_port</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--neighbors</span></code></p></li>
</ul>
</div></blockquote>
<p>SimulaQron will ask you before it makes any changes to the network config file. If you wan to suppress this you can add the flag <code class="docutils literal notranslate"><span class="pre">--force</span></code> (<code class="docutils literal notranslate"><span class="pre">-f</span></code>).</p>
<p>If you want to build up a (or many) more complex networks it can become tedious to do this through the CLI.
You can instead write your own network config file.
This network config file should be a .json file and could for example look as follows.
An example of such a file can be seen below which contains two networks (“default” and “small_network”) which the nodes “Alice”, “Bob” and “Test” respectively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;app_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8000</span>
                <span class="p">],</span>
                <span class="s2">&quot;cqc_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8001</span>
                <span class="p">],</span>
                <span class="s2">&quot;vnode_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8004</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;Bob&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;app_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8007</span>
                <span class="p">],</span>
                <span class="s2">&quot;cqc_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8008</span>
                <span class="p">],</span>
                <span class="s2">&quot;vnode_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8010</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;topology&quot;</span><span class="p">:</span> <span class="n">null</span>
    <span class="p">}</span>
    <span class="s2">&quot;small_network&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;Test&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;app_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8031</span>
                <span class="p">],</span>
                <span class="s2">&quot;cqc_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8043</span>
                <span class="p">],</span>
                <span class="s2">&quot;vnode_socket&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                    <span class="mi">8089</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;topology&quot;</span><span class="p">:</span> <span class="n">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you want simulaqron to use your custom network.json file simply set this in the settings by <code class="docutils literal notranslate"><span class="pre">simulaqron</span> <span class="pre">set</span> <span class="pre">network-config-file</span> <span class="pre">your/path/my_network.json</span></code> or add the following line to a file <code class="docutils literal notranslate"><span class="pre">~/.simulaqron.json</span></code>: <code class="docutils literal notranslate"><span class="pre">network_config_file:</span> <span class="pre">your/path/my_network.json</span></code>, where <code class="docutils literal notranslate"><span class="pre">your/path/my_network.json</span></code> is the path to your custom network config file.</p>
<p>The entries <code class="docutils literal notranslate"><span class="pre">&quot;topology&quot;</span></code> can be used to define the topology of the network.
This could for example be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">],</span>
 <span class="s2">&quot;Bob&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">]</span>
 <span class="s2">&quot;Charlie&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>descibing network where Alice is adjacent to Bob, Bob is adjacent to Alice and Charlie and Charlie is adjacent to Bob.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Undirected topologies are also supported. That is, networks where for example Alice can send a qubit to Bob but Bob cannot send a qubit to Alice.</p>
</div>
</div>
<div class="section" id="starting-a-network-from-python">
<h2>Starting a network from Python<a class="headerlink" href="#starting-a-network-from-python" title="Permalink to this headline">¶</a></h2>
<p>You can also start a network within a Python script (this is in fact what simulaqron does), by using the class <code class="code docutils literal notranslate"><span class="pre">simulaqron.network.Network</span></code>. To setup a network by name “test” with the nodes Alice, Bob and Charlie, where Bob is connected with Alice and Charlie but Alice and Charlie are not connected use the following code code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">simulaqron.network</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Setup the network</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">]</span>
    <span class="n">topology</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">],</span> <span class="s2">&quot;Bob&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">],</span> <span class="s2">&quot;Charlie&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">]}</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span> <span class="n">topology</span><span class="o">=</span><span class="n">topology</span><span class="p">)</span>

    <span class="c1"># Start the network</span>
    <span class="n">network</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;To stop the network, press enter...&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>By default the method <code class="code docutils literal notranslate"><span class="pre">simulaqron.network.Network.start</span></code>, only returns when the network is running, i.e. all the connections are established. To avoid this use the argument <code class="code docutils literal notranslate"><span class="pre">wait_until_running=False</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The network will stop when the network-object goes out of scope and is handled by the Python garbade collector. The network can be manually stopped with the method <code class="code docutils literal notranslate"><span class="pre">simulaqron.network.Network.stop</span></code>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CQC.html" title="The CQC interface"
             >next</a> |</li>
        <li class="right" >
          <a href="GettingStarted.html" title="Getting started"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SimulaQron 3.0.15 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Stephanie Wehner and Axel Dahlberg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>